"use strict";(globalThis.webpackChunkjira_assistant=globalThis.webpackChunkjira_assistant||[]).push([[487],{6929:(e,s,t)=>{t.d(s,{Z:()=>k});var o=t(7313),n=t(6123),l=t.n(n),r=t(816),i=t(1485),a=t(6614),u=t(6417);const d=(0,u.jsx)("div",{className:"empty-group-msg",children:"Drag and drop column here to group data"}),c=(0,u.jsx)("span",{children:"Drag and drop more columns here"});class p extends o.PureComponent{constructor(){super(...arguments),this.toggleSort=(e,s)=>{const{groupBy:t,foldable:o,onChange:n}=this.props,l=[...t];l[e]={...l[e],sortDesc:s},n(l,o,"sort")},this.changeSettings=(e,s)=>{const{groupBy:t,foldable:o,onChange:n}=this.props,l=[...t];l[e]={...l[e],settings:s},n(l,o,"settings")},this.removeGroup=e=>{const{groupBy:s,foldable:t,onChange:o}=this.props,n=[...s];n.splice(e,1),o(n,t,"remove")},this.toggleMode=e=>{const{groupBy:s,foldable:t,onChange:o}=this.props;!!t!==e&&o(s,e,"mode")},this.columnReordered=e=>{const{foldable:s,onChange:t}=this.props;t(e,s,"rearrange")}}render(){const{groupBy:e,foldable:s,toggleColumns:t,showColumns:o,allColumns:n,displayColumns:l}=this.props;let r=null;return l&&l.length<(null===n||void 0===n?void 0:n.length)?r=`${l.length} (${n.length})`:null!==n&&void 0!==n&&n.length&&(r=null===n||void 0===n?void 0:n.length),(0,u.jsxs)("div",{className:"group-bar",children:[(0,u.jsx)("span",{className:"fa group-mode-icon fa-columns"+(o?" active":""),onClick:t,title:"Click to choose what column to display",children:r&&(0,u.jsx)("span",{className:"badge badge-warning visible-cols",children:r})}),e.length>0&&(0,u.jsx)("span",{className:"fa group-mode-icon fa-th-list"+(s?"":" active"),onClick:()=>this.toggleMode(!1),title:"Display group values in columns"}),e.length>0&&(0,u.jsx)("span",{className:"fa group-mode-icon fa-indent"+(s?" active":""),onClick:()=>this.toggleMode(!0),title:"Display group values in foldable row"}),(0,u.jsx)("span",{className:"group-label",children:"Group by:"}),(0,u.jsx)("div",{className:"group-list-container",children:(0,u.jsx)(i.bt,{className:"group-list",items:e,itemType:"column",onChange:this.columnReordered,accepts:["column"],placeholder:e.length?c:d,children:(e,s,t)=>(0,u.jsx)(g,{group:e,index:s,toggleSort:this.toggleSort,removeGroup:this.removeGroup,settingsChanged:this.changeSettings,dropProps:t},s)})})]})}}const h=p;class g extends o.PureComponent{constructor(){super(...arguments),this.removeGroup=()=>this.props.removeGroup(this.props.index),this.sortAsc=()=>this.props.toggleSort(this.props.index,!1),this.sortDesc=()=>this.props.toggleSort(this.props.index,!0),this.setRef=e=>{this.el=e;const{dropProps:{dropConnector:s}={}}=this.props;s&&s(e)},this.changeSettings=e=>{let{prop:s,type:t,value:o,default:n,aggregate:l}=e;const{settingsChanged:r,group:i,index:a}=this.props;let{settings:u}=i;if(u=u?{...u}:{},"check"===t){const e=void 0===u[s]?n:u[s];u[s]=!e}else u[s]=o;r(a,u)},this.showMenu=e=>{const{group:{groupOptions:s,settings:t}}=this.props,o=s.map((e=>{if(e.separator)return{separator:!0};const{label:s,type:o,prop:n,value:l="check"===o,default:r}=e,i=null===t||void 0===t?void 0:t[n];return{label:s,icon:`${"fa fa-"+(i===l||void 0===i&&r?"check-":"")}${"check"===o?"square":"circle"}`,command:()=>this.changeSettings(e)}}));(0,i.pT)(e,o)}}render(){var e,s;const{group:t}=this.props;return(0,u.jsxs)("div",{ref:this.setRef,className:"group-list-item",onContextMenu:null!==(e=t.groupOptions)&&void 0!==e&&e.length?this.showMenu:void 0,children:[!t.sortDesc&&(0,u.jsx)("span",{className:"fa fa-sort-amount-asc sort-icon",onClick:this.sortDesc,title:"Click to sort desc"}),!!t.sortDesc&&(0,u.jsx)("span",{className:"fa fa-sort-amount-desc sort-icon",onClick:this.sortAsc,title:"Click to sort asc"}),t.displayText,!(null===(s=t.groupOptions)||void 0===s||!s.length)&&(0,u.jsx)("span",{className:"fa fa-wrench margin-l-5 pointer",onClick:this.showMenu,title:"Click to change settings"}),(0,u.jsx)("span",{className:"fa fa-times",onClick:this.removeGroup})]})}}var m=t(8933);class v extends o.PureComponent{constructor(e){super(e),this.hideColumns=()=>{let{columns:e}=this.state,s=e.filter((e=>e.selected));s=s.length===e.length?null:s.map((e=>e.id)),e=null,this.props.onChange(s)},this.selectionChanged=(e,s)=>{let{columns:t}=this.state;t=[...t],t[e]={...t[e],selected:s},this.setState({columns:t})},this.state=this.getState(e)}getState(e){const{displayColumns:s}=e;return{columns:this.props.columns.map((e=>{let{id:t,displayText:o}=e;return{id:t,displayText:o,selected:!s||!!~s.indexOf(t)}}))}}render(){const{columns:e}=this.state;return(0,u.jsx)("div",{className:"columns-list-container",children:(0,u.jsxs)("div",{className:"columns-list",children:[(0,u.jsxs)("div",{className:"column-list-title",children:[(0,u.jsx)("span",{className:"fa fa-times",onClick:this.hideColumns}),(0,u.jsx)("span",{children:"Choose Columns"})]}),(0,u.jsx)("div",{className:"columns-list-items",children:e.map(((e,s)=>(0,u.jsx)("div",{className:"column-list-item",children:(0,u.jsx)(m.XZ,{label:e.displayText,checked:e.selected,onChange:e=>this.selectionChanged(s,e)})},s)))})]})})}}const x=v;var y=t(4711),f=t(4616);const C=["column"];class j extends o.PureComponent{constructor(e){super(e),this.getGroupColumnRenderer=e=>(s,t)=>(0,u.jsx)("th",{rowSpan:e?2:void 0,className:"group-header foldable"},t),this.renderTableBody=(e,s)=>s&&s.length?this.getGroupRenderer(e,s):this.getRowRenderer(e),this.getCellRenderer=e=>(s,t)=>{if(!s.visible)return null;const{field:o,hasPath:n,format:l,type:r,viewComponent:i,props:a}=s;let d=n?(0,y.aM)(e,o):e[o];return l&&"function"===typeof l&&(d=l(d,e,o)),i?(0,u.jsx)(i,{value:d,...a},t):(0,u.jsx)("td",{exportType:r,children:d},t)},this.toggleGroupVisibility=e=>{},this.sortColumnChanged=(e,s)=>{const{groupBy:t,state:{groupFoldable:o,data:n},props:{displayColumns:l}}=this,r={groupFoldable:o},i=null===t||void 0===t?void 0:t.length;return i&&(r.data=this.sortGroupedData(n,t,e,s)),this.setState(r),this.props.onChange({groupBy:t,groupFoldable:o,displayColumns:l,sortField:e,isDesc:s}),i?r.data:void 0},this.onGroupChanged=(e,s,t)=>{const{data:o}=this.state,n={data:o,groupFoldable:s},{displayColumns:l,sortField:r,isDesc:i,groupBy:a}=this.props;"sort"===t&&(n.data=this.sortGroupedData(o,e,r,i)),e="mode"!==t?e.map((e=>{let{id:s,field:t,fieldKey:o,sortDesc:n,settings:l}=e;return{id:s,field:t,fieldKey:o,sortDesc:n,settings:l}})):a,this.setState(n),this.props.onChange({groupBy:e,displayColumns:l,groupFoldable:s,sortField:r,isDesc:i})},this.toggleColumns=()=>{this.setState({showColumns:!this.state.showColumns})},this.columnSelectionChanged=e=>{const{groupBy:s,groupFoldable:t,sortField:o,isDesc:n}=this.props;this.setState({showColumns:null},(()=>this.props.onChange({groupBy:s,displayColumns:e,groupFoldable:t,sortField:o,isDesc:n})))},(0,f.f3)(this,"UtilsService"),this.convertDate=this.$utils.convertDate,this.state=this.getNewState(e)}UNSAFE_componentWillReceiveProps(e){this.setState(this.getNewState(e))}getNewState(e){const{groupBy:s,columns:t,displayColumns:o,dataset:n,groupFoldable:l,sortField:r,isDesc:i}=e,a={...this.state,groupFoldable:l};this.columns===t&&o===this.displayColumns||(a.allColumns=this.getColumnSchema(e),a.columns=a.allColumns,this.columns=t,this.displayColumns=o);const u=this.groupBy!==s;if(u)if(a.groupBy=this.getGroupedColumnSchema(s,a.allColumns),this.groupBy=s,s&&s.length){const e=s.map((e=>"string"===typeof e?e:e.id||e.field));a.columns=a.allColumns.filter((s=>s.visible&&!~e.indexOf(s.id)))}else a.columns=a.allColumns.filter((e=>e.visible));return(u||this.isDesc!==i||this.sortField!==r||this.dataset!==n)&&(a.data=this.prepareDataForRendering(n,a.groupBy,r,i),this.dataset=n,this.sortField=r,this.isDesc=i),a}getGroupedColumnSchema(e,s){let t=null;return Array.isArray(e)&&e.length&&(s=s.reduce(((e,s)=>(e[s.id]=s,e)),{}),t=e.map((e=>{let t,o=e,n=e,l=o,r=!1;if("object"===typeof e&&(o=e.field,n=e.id||o,l=e.fieldKey||e.groupKey||o,r=e.sortDesc,t=e.settings),!(e=s[n]))return null;const{displayText:i,allowSorting:a,groupOptions:u,type:d,viewComponent:c}=e;return{id:n,field:o,viewComponent:c,fieldKey:l,displayText:i,allowSorting:a,groupOptions:u,sortDesc:r,visible:!0,settings:t,type:d}})).filter(Boolean),t.length||(t=null)),t}getColumnSchema(e){const{columns:s,allowSorting:t=!0,allowGrouping:o=!0}=e;let{displayColumns:n}=e;Array.isArray(n)||(n=null);const l=!!n&&n.some((e=>e.startsWith("-")));return s.map((e=>{const{field:s,fieldKey:r=s,allowSorting:i=t,groupText:a,allowGrouping:u=o,groupOptions:d,format:c,type:p,viewComponent:h,props:g,sortValueFun:m,groupValueFunc:v}=e,x=e.id||s;return{id:x,field:e.field,fieldKey:r,hasPath:(null===s||void 0===s?void 0:s.indexOf("."))>0,displayText:e.displayText||s,visible:!n||(l?!n.includes(`-${x}`):n.includes(x)),allowSorting:i,groupText:a,allowGrouping:u,groupOptions:d,format:c,type:p,viewComponent:h,props:g,sortValueFun:m,groupValueFunc:v}}))}prepareDataForRendering(e,s,t,o){return s&&s.length&&Array.isArray(e)&&e.length?this.groupData(e,s,t,o):t?e.sortBy(t,o):e}groupData(e,s,t,o,n){var l;if(n=n?`${n}_`:"",!s.length)return t?e.sortBy(t,o):e;const{0:{field:i,fieldKey:a,sortDesc:u,settings:d,type:c}}=s;s=s.slice(1);const p=a&&a!==i,h=function(s){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.groupBy(s,null,p?i:t)};let g=null===d||void 0===d?void 0:d.funcType;const m=this.convertDate;let v=null;if("date"===c||"datetime"===c){g=g||"yyyy-MM (MMMM)";let e=e=>{const s=m(e[i]);return s?s.format(g):s};"friendly"===g&&(e=e=>{const s=e[i];return s?r(s).fromNow():s}),v=h(e,((e,s)=>({text:s||"(no date)"})))}else if(!g||"number"!==c&&"seconds"!==c){switch(null===d||void 0===d?void 0:d.valueType){case"count":v=[{key:e.length,values:e}];break;case"distinct":v=[{key:null===(l=e.distinct(a||i))||void 0===l?void 0:l.length,values:e}];break;default:v=h(a||i)}}else switch(g){default:v=h(a||i);break;case"sum":v=[{key:e.sum(i),values:e}];break;case"avg":v=[{key:e.avg(i),values:e}];break;case"count":const s=e.count((e=>e[i]>0));v=[{key:s,keyObj:{text:`${s} has value`},values:e}]}return v.sortBy("key",u).map(((e,l)=>({key:e.key,keyObj:e.keyObj,path:n+l,rowSpan:e.values.length,values:this.groupData(e.values,s,t,o,n+l)})))}getColumnGrouping(e){const s=e.groupBy("groupText",(e=>e.visible)).filter((e=>{let{key:s}=e;return!!s}));return s.length?s:void 0}getColGroupingLen(e){if(e)return e.reduce(((e,s)=>(e[s.key]=s.values.length,e)),{})}getGroupedRow(e){return e?(0,u.jsx)(a.lE,{children:e.map((e=>e.values.map(this.getColumnRenderer(!1))))}):null}getColumnRenderer(e,s){return(t,o)=>{if(!t.visible)return null;let n,l=!e&&t.allowSorting?t.fieldKey||t.field:void 0,r=t.allowGrouping,d=s?2:void 0,c=t.displayText;if(s&&t.groupText){if(c=t.groupText,n=s[c],!n)return null;delete s[c],d=void 0,l=void 0,r=!1}return!1===r?(0,u.jsx)(a.sg,{sortBy:l,rowSpan:d,colSpan:n,children:c},o):(0,u.jsx)(i._l,{itemType:"column",item:t,itemTarget:C,children:(e,s)=>(0,u.jsx)(a.sg,{rowSpan:d,colSpan:n,dragConnector:e,sortBy:l,children:c})},o)}}getRowRenderer(e){return(s,t)=>(0,u.jsx)("tr",{children:this.renderRowCells(e,s)},t)}renderRowCells(e,s){return e.map(this.getCellRenderer(s))}getGroupRenderer(e,s){const{groupFoldable:t}=this.state;return t?(t,o)=>this.renderFoldableGroupRow(t,o,e,s):(t,o)=>this.renderGroupRow(t,o,e,s)}renderFoldableGroupRow(e,s,t,n){var l;let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const i=n[0],a="value"!==((null===i||void 0===i||null===(l=i.settings)||void 0===l?void 0:l.valueType)||"value")?null:null===i||void 0===i?void 0:i.viewComponent,d=r>0&&[].init(((e,s)=>(0,u.jsx)("td",{className:"group-indent-td"},s)),r),c=n.length>0&&(0,u.jsxs)("tr",{children:[d,(0,u.jsx)("td",{className:"group-toggler-td",title:`Click to ${e.hidden?"expand":"collapse"} group`,"group-path":e.path,onClick:this.toggleGroupVisibility,children:(0,u.jsx)("span",{className:"fa fa-caret-"+(e.hidden?"right":"down")})}),(0,u.jsx)("td",{className:"group-name-td",colSpan:n.length+t.length,children:a?(0,u.jsx)(a,{tag:"span",count:e.rowSpan,value:e.keyObj||e.key,settings:i.settings}):e.key||""})]},e.key);let p=null;return n.length>0?p=e.values.map(((e,s)=>this.renderFoldableGroupRow(e,s,t,n.slice(1),r+1))):(p=t.map(this.getCellRenderer(e)),p=(0,u.jsxs)("tr",{children:[d,p]},s)),(0,u.jsxs)(o.Fragment,{children:[c,p]},s)}renderGroupRow(e,s,t,n){var l;let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const i=n[0],a="value"!==((null===i||void 0===i||null===(l=i.settings)||void 0===l?void 0:l.valueType)||"value")?null:null===i||void 0===i?void 0:i.viewComponent;let d=n.length>0&&(0,u.jsx)("td",{rowSpan:e.rowSpan,children:a?(0,u.jsx)(a,{tag:"span",count:e.rowSpan,settings:null===i||void 0===i?void 0:i.settings,value:e.keyObj||e.key}):e.key||""});r&&d?d=(0,u.jsxs)(o.Fragment,{children:[r,d]}):r&&0===s&&(d=r);let c=null;return n.length>0?c=e.values.map(((e,s)=>this.renderGroupRow(e,s,t,n.slice(1),0===s&&d))):(c=t.map(this.getCellRenderer(e)),c=(0,u.jsxs)("tr",{children:[d,c]},s)),c}sortGroupedData(e,s,t,o,n){if(n=n?`${n}_`:"",0===s.length)return t?e.sortBy(t,o):e;const{sortDesc:l}=s[0];return s=s.slice(1),e.sortBy("key",l).map(((e,l)=>({...e,path:n+l,values:this.sortGroupedData(e.values,s,t,o,n+l)})))}render(){const{exportSheetName:e,noRowsMessage:s,sortField:t,isDesc:o,displayColumns:n,className:r,hideGroups:i}=this.props,{allColumns:d,columns:c,groupBy:p,groupFoldable:g,data:m,showColumns:v}=this.state,y=this.getColumnGrouping(c),f=this.getColGroupingLen(y);return(0,u.jsxs)("div",{className:l()("groupable-grid",i&&"groups-hidden"),children:[v&&(0,u.jsx)(x,{onChange:this.columnSelectionChanged,columns:d,displayColumns:n}),!i&&(0,u.jsx)(h,{groupBy:p||[],displayColumns:n,allColumns:d,foldable:g,showColumns:v,onChange:this.onGroupChanged,toggleColumns:this.toggleColumns}),(0,u.jsxs)(a.TT,{className:r,dataset:m,exportSheetName:e,sortBy:t,isDesc:o,onSort:this.sortColumnChanged,children:[(0,u.jsxs)(a.Et,{children:[(0,u.jsxs)(a.lE,{children:[!!g&&p&&p.map(this.getGroupColumnRenderer(f)),!g&&p&&p.map(this.getColumnRenderer(!0,f)),c.map(this.getColumnRenderer(!1,f))]}),this.getGroupedRow(y)]}),(0,u.jsx)(a.XP,{children:this.renderTableBody(c,p)}),(0,u.jsx)(a.ch,{span:c.length,children:s})]})]})}}const k=j},2251:(e,s,t)=>{t.d(s,{Sn:()=>i,qm:()=>u,lc:()=>h,m4:()=>g,y5:()=>m,Y3:()=>v,Bx:()=>x,_t:()=>C,a3:()=>w,Hv:()=>S,aS:()=>T,s$:()=>N,H:()=>F});var o=t(7313),n=t(6417);class l extends o.PureComponent{render(){const{tag:e="td",className:s,settings:t,count:o}=this.props,l=!!o&&!(null===t||void 0===t||!t.showGroupCount)&&(0,n.jsxs)("span",{className:"badge badge-info margin-l-5",title:`Total issues in group: ${o}`,children:["(",o,")"]});return(0,n.jsx)(e,{className:s,children:this.renderControl(l)})}}const r=l;const i=class extends r{renderControl(){const{value:e}=this.props;return null!==e&&void 0!==e&&e.length?`${e.length} comments`:null}};var a=t(7174);const u=class extends r{constructor(e){super(e),(0,a.f3)(this,"UserUtilsService")}renderControl(e){const{value:s,date:t=s,quick:o}=this.props;return t?null!==s&&void 0!==s&&s.text?(0,n.jsxs)(n.Fragment,{children:[s.text," ",e]}):(0,n.jsxs)("span",{title:o?this.$userutils.formatDateTime(t):null,children:[o&&"about "," ",this.$userutils.formatDateTime(t,o?"quick":null)]}):e}};var d=t(4616),c=t(8933),p=t(794);const h=class extends r{constructor(e){super(),e.getTicketUrl?this.getTicketUrl=e.getTicketUrl:((0,d.f3)(this,"UserUtilsService"),this.getTicketUrl=this.$userutils.getTicketUrl)}renderControl(e){var s;const{value:t,issue:o=t,title:l,className:r,settings:i}=this.props;if(!o)return e;if("string"===typeof o)return o;const a=o.key,u=o.fields,d=null===u||void 0===u?void 0:u.issuetype,h=null===u||void 0===u?void 0:u.summary,g=null===d||void 0===d?void 0:d.iconUrl,m=null===d||void 0===d?void 0:d.name;let v=null===u||void 0===u||null===(s=u.status)||void 0===s?void 0:s.name;v=!!v&&!1!==(null===i||void 0===i?void 0:i.showStatus)&&`(${v})`;const x=null===i||void 0===i?void 0:i.valueType;let y=a||"Unknown";return"summary"===x?y=h:"both"===x&&(y=(0,n.jsxs)(n.Fragment,{children:[y," - ",h]})),(0,n.jsxs)(p.Z,{href:this.getTicketUrl(a),title:l,className:`link ${r}`,children:[!!g&&(0,n.jsx)(c.Ee,{src:g,title:m}),(0,n.jsxs)("span",{title:h,children:[y," ",v]}),e]})}};const g=class extends r{constructor(){super(),(0,d.f3)(this,"UserUtilsService")}renderControl(){const{value:e}=this.props;if(null===e||void 0===e||!e.length)return null;const s=this.$userutils.getTicketUrl;return(0,n.jsx)("ul",{className:"tags",children:e.map(((e,t)=>{const o=e.type,l=o&&(e.inwardIssue?o.inward:o.outward);return(0,n.jsx)("li",{children:(0,n.jsx)(h,{tag:"span",issue:o?e.inwardIssue||e.outwardIssue:e,title:l,getTicketUrl:s,className:"badge badge-pill skin-bg-font"})},t)}))})}};const m=class extends r{renderControl(e){const{value:s,textField:t="name",iconField:o="iconUrl"}=this.props;return s?(0,n.jsxs)(n.Fragment,{children:[!!o&&(0,n.jsx)(c.Ee,{src:s[o]}),s[t]," ",e]}):e}};const v=class extends r{renderControl(){const{value:e,progress:s=e}=this.props;return null!==s&&void 0!==s&&s.percent?`${s.percent}%`:null}};const x=class extends r{renderControl(e){var s;const{value:t,project:o=t,settings:l}=this.props;if(!o)return e;if("string"===typeof o)return o;const r=null===(s=o.avatarUrls)||void 0===s?void 0:s["16x16"],i=null===l||void 0===l?void 0:l.valueType;let a=o.key;return"name"===i?a=o.name:"both"===i&&(a=(0,n.jsxs)(n.Fragment,{children:[o.name," (",o.key,")"]})),(0,n.jsxs)(n.Fragment,{children:[!!r&&(0,n.jsx)(c.Ee,{src:r}),a,e]})}};var y=t(4711);const f=/^com\..*\[.*\].*$/;const C=class extends r{getRepeator(e){const{tagProp:s="name",titleProp:t,iconClass:o,hrefProp:l,hideZero:r}=this.props,i=!!o&&(0,n.jsx)("span",{className:`fa ${o}`});return l?(o,a)=>{const u="string"===typeof o?o:o[s];if(0===u&&r)return null;const d=(0,n.jsxs)(p.Z,{href:o[l]||void 0,title:t?o[t]:void 0,className:"link badge badge-pill skin-bg-font",children:[i," ",u]});return e?d:(0,n.jsx)("li",{children:d},a)}:(o,l)=>{let a=o;if("string"===typeof o)f.test(o)&&(a=(o=(0,y.Kk)(o))[s||"name"]||a);else if(a=o[s],0===a&&r)return null;const u=(0,n.jsxs)("span",{title:t?o[t]:void 0,className:"badge badge-pill skin-bg-font",children:[i," ",a]});return e?u:(0,n.jsx)("li",{children:u},l)}}renderControl(){const{value:e}=this.props;return e?Array.isArray(e)?(0,n.jsx)("ul",{className:"tags",children:e.map(this.getRepeator())}):"object"===typeof e?this.getRepeator(!0)(e,0):void 0:null}};var j=t(1485),k=t(4074);class b extends r{constructor(e){super(e),this.startTimer=()=>this.context.startTimer(this.props.value),this.showContext=e=>{const s=[...this.contextMenu];try{const e=this.context.getElapsedTimeInSecs(),t=(null===e||void 0===e?void 0:e.key)===this.props.value,o=null===e||void 0===e?void 0:e.isRunning;t?(o?s.push({label:"Pause timer",icon:"fa fa-pause",command:this.context.pauseTimer}):s.push({label:"Resume timer",icon:"fa fa-play",command:this.context.resumeTimer}),s.push({label:"Stop timer",icon:"fa fa-stop",command:this.context.stopTimer})):s.push({label:"Start timer",icon:"fa fa-play",command:this.startTimer})}catch{}(0,j.pT)(e,s)},(0,d.f3)(this,"UserUtilsService","BookmarkService"),this.contextMenu=[!e.hideWorklog&&{label:"Add worklog",icon:"fa fa-clock-o",command:this.addWorklog.bind(this)},{label:"Bookmark",icon:"fa fa-bookmark",command:()=>this.addBookmark()}].filter(Boolean)}renderControl(e){const{value:s,url:t=this.$userutils.getTicketUrl(s),hideContext:o}=this.props;return s?(0,n.jsxs)(n.Fragment,{children:[!o&&(0,n.jsx)("i",{className:"fa fa-ellipsis-v margin-r-8",onClick:this.showContext}),(0,n.jsx)(p.Z,{href:t,className:"link strike",children:s}),e]}):e}addWorklog(){const{onAddWorklog:e,value:s}=this.props;e?e(s):console.error("Add worklog function is not yet implemented")}addBookmark(){const{value:e,onBookmark:s}=this.props;this.$bookmark.addBookmark([e],!s).then(s)}}b.contextType=k.a2;const w=b;const S=class extends r{constructor(e){super(e),(0,d.f3)(this,"UtilsService")}renderControl(e){var s;const{value:t,inputType:o="secs",days:l,converter:r}=this.props;let{timespent:i=t}=this.props;return r&&(i=r(i)),i?("ticks"===o&&i>500&&(i=parseInt(i/1e3)),i=null!==(s=i)&&void 0!==s&&s.text?i.text:this.$utils.formatSecs(i,void 0,void 0,l),(0,n.jsxs)("span",{children:[i," ",e]})):e}};const T=class extends r{renderControl(){const{value:e}=this.props;if(!e)return null;const{remainingEstimate:s,timeSpent:t}=e;return t||s?(0,n.jsxs)("span",{children:[t," (",s," remaining)"]}):null}};const N=class extends r{renderControl(e){var s;let{value:t}=this.props;return t?(t=(null===(s=t)||void 0===s?void 0:s.text)||t,"object"!==typeof t?(0,n.jsxs)(n.Fragment,{children:[t," ",e]}):Array.isArray(t)?t.length?this.getTagRenderer(t[0],t):null:this.getTagRenderer(t,t)):e}getTagRenderer(e,s){return"string"===typeof e?(0,n.jsx)(C,{value:s,tagProp:"",tag:"span"}):e.value?(0,n.jsx)(C,{value:s,tagProp:"value",tag:"span"}):e.name?(0,n.jsx)(C,{value:s,tagProp:"name",tag:"span"}):JSON.stringify(e)}};const F=class extends r{renderControl(e){var s,t;const{value:o,user:l=o,settings:r}=this.props;if(!l)return e;if("string"===typeof l)return l;const i=!(null===r||void 0===r||!r.showImage)&&((null===(s=l.avatarUrls)||void 0===s?void 0:s["32x32"])||(null===(t=l.avatarUrls)||void 0===t?void 0:t["48x48"])),a=null===r||void 0===r?void 0:r.valueType;let u=l.displayName;return"email"===a?u=l.emailAddress:"both"===a&&(u=(0,n.jsxs)(n.Fragment,{children:[l.displayName," (",l.emailAddress,")"]})),(0,n.jsxs)(n.Fragment,{children:[!!i&&(0,n.jsx)(c.Ee,{className:"img-x32",src:i}),u,e]})}}},1732:(e,s,t)=>{t.d(s,{Z:()=>i});var o=t(7313),n=t(2544),l=t(6417);class r extends o.PureComponent{constructor(){super(...arguments),this.onChange=e=>{this.props.onChange(null===e||void 0===e?void 0:e.trim(),null)}}render(){const{jql:e}=this.props;return(0,l.jsx)("div",{className:"jql-editor",children:(0,l.jsx)(n.Z,{className:"jql-query",multiline:!0,placeholder:"JQL query to fetch data",value:e,onChange:this.onChange})})}}const i=r}}]);